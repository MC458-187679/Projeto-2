\section{Definições}

Um alpinista deve escalar uma parede representada por uma grade $n \times m$, em cada célula $(i, j)$ da grade tem um custo $C_{i, j} > 0$ associado. O alpinista deve começar na base, linha 1, e chegar no topo, linha $n$, tentando minizar o grau de periculosidade (custo total) do caminho. Quando ele se encontra na célula $(i, j)$, com $1 \leq i < n$ e $1 \leq j \leq m$, os únicos movimentos possíveis são para as células $(i+1, j-1)$, $(i+1, j)$ ou $(i+1, j+1)$, se elas fazem parte da parede.

\subsection{Definições Adicionais}

\begin{definition}[Caminho até o Topo]
    Considere um caminho $P = \left(p_1, \ldots, p_k\right)$, sendo $k$ a quantidade de vértices no caminho. Então, $P$ é um \textit{caminho até o topo} se ele termina em alguma célula do topo da parede, ou seja, $p_k = (n, j)$ para algum $1 \leq j \leq m$.
\end{definition}

\begin{definition}[Risco]
    O grau de periculosidade ou risco $R(P)$ de um caminho $P = \left(p_1, \ldots, p_k\right)$ é dado pela soma dos custos de cada célula do caminho, isto é,
    \[
        R(P) = \sum_{1 \leq i \leq k} C_{p_i}
    \]
\end{definition}

\begin{definition}[Risco Mínimo]
    O risco mínimo $R^*_{i, j}$ de uma célula $(i, j)$ é o risco de um \textit{caminho ótimo} de $(i, j)$, ou seja, um caminho até o topo $P$ com menor custo total $R(P)$ dentre os caminhos partindo de $(i, j)$.
\end{definition}

\section{Solução Recorrente}

\begin{theorem}[subestrutura ótima]
    Seja $1 \leq i < n$ e $1 \leq j \leq m$, de forma que $k \geq 2$, e suponha um caminho $P = \left(p_1, p_2, \ldots, p_k\right)$ até o topo partindo de $p_1 = (i, j)$ e com risco mínimo $R(P) = R^*_{i, j}$. Então, o subcaminho $\left(p_2, \ldots, p_k\right)$ tem o menor risco possível partindo de $p_2$.
\end{theorem}

\begin{proof}
    Seja $S = \left(p_2, \ldots, p_k\right)$ o subcaminho de $P$ mencionada e suponha um caminho até o topo $S' = \left(s_1, \ldots, s_l\right)$ partindo de $s_1 = p_2$, com risco $R(S') = R^*_{p_2}$ mínimo. Assim, temos o caminho $P' = \left(p_1, s_1, \ldots, s_l\right)$, com risco
    \[
        R(P') = C_{p_1} + \sum_{1 \leq t \leq l} C_{s_t} = C_{i,j} + R(S')
    \]

    Suponha, por contradição, que $R(S') < R(S)$. Então, temos que
    \begin{align*}
        R(P') &= C_{i,j} + R(S')  \\
            &< C_{i,j} + R(S) \\
            &= C_{p_1} + \sum_{2 \leq t \leq k} C_{p_t} \\
            &= R(P)
    \end{align*}
    Logo, $P$ não é o caminho partindo de $p_1$ com menor risco, o que contradiz a suposição inicial.

    Portanto, $R(S') = R^*_{p_2} \geq R(S)$, isto é, $S$ tem risco mínimo, dentre os caminhos partindo de $p_2$.
\end{proof}
